{% extends 'outsideBase.html' %}
{% load static %}


{% block register %}
<div class="card o-hidden border-0 shadow-lg my-5">
    <div class="card-body p-0">
        <!-- Nested Row within Card Body -->
        <div class="row">
            <div class="col-lg-5 d-none d-lg-block bg-register-image"></div>
            <div class="col-lg-7">
                <div class="p-5">
                    <div class="text-center">
                        <h1 class="h4 text-gray-900 mb-4">Create an Account!</h1>
                    </div>
                    <form class="ibox-body" id="register-form" action="{% url 'register' %}" method="POST">
                        {% csrf_token %}

                        <div class="form-group mb-4">
                            <input class="form-control form-control-line" type="text" name="user_name" placeholder="Username">
                        </div>
                        <div class="form-group mb-4">
                            <input class="form-control form-control-line" type="text" name="full_name" placeholder="Full Name">
                        </div>
                        <div class="form-group mb-4">
                            <input class="form-control form-control-line" type="text" name="email" placeholder="Email">
                        </div>
                        <div class="form-group mb-4">
                            <input class="form-control form-control-line" type="number" name="phone_number" placeholder="Phone Number">
                        </div>
                        <div class="form-group mb-4">
                            <input class="form-control form-control-line" type="text" name="specilist" placeholder="Specilist">
                        </div>
                        <!-- <div class="form-group mb-4">
                            <input class="form-control form-control-line" type="text" name="role" placeholder="Role" disabled>
                            
                        </div> -->
                        <div class="form-group mb-4">
                            <input class="form-control form-control-line" type="text" name="district" placeholder="District">
                        </div>
                        <div class="form-group mb-4">
                            <input class="form-control form-control-line" type="text" name="city" placeholder="City">
                        </div>
                        <div class="form-group mb-4">
                            <input class="form-control form-control-line" type="number" name="ward" placeholder="Ward No.">
                        </div>
                        <div class="form-group mb-4">
                            <input class="form-control form-control-line" type="password" id="password" name="password"
                                placeholder="Password">
                        </div>
                        <div class="form-group mb-4">
                            <input class="form-control form-control-line" type="password" id="confirm_password" name="confirm_password"
                                placeholder="Confirm Password">
                        </div>

                        <button type="submit" class="btn btn-primary btn-user btn-block">
                            Register
                        </button>
                        <hr>
                        <a href="index.html" class="btn btn-google btn-user btn-block">
                            <i class="fab fa-google fa-fw"></i> Register with Google
                        </a>
                        <a href="index.html" class="btn btn-facebook btn-user btn-block">
                            <i class="fab fa-facebook-f fa-fw"></i> Register with Facebook
                        </a>
                    </form>
                    <hr>
                    <div class="text-center">
                        <a class="small" href="{% url 'login' %}">Already have an account? Login!</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block externaljs %}
<script>
    $(function () {
        $('#register-form').validate({
            errorClass: "help-block",
            rules: {
                user_name: {
                    required: true,
                    remote: {
                        url: "{% url 'check_username' %}",
                        type: "POST",
                        data: {
                            user_name: $('.user_name').val(),
                            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                        },
                    }
                },
                email: {
                    required: true,
                    email: true,
                    remote: {
                        url: "{% url 'check_email' %}",
                        type: "POST",
                        data: {
                            email: $('.email').val(),
                            csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                        }
                    },
                },
                phone_number: {
                    required: true
                },
                password: {
                    required: true,
                    minlength: 6
                },
                confirm_password: {
                    required: true,
                    equalTo: "#password"
                },
                phone_number: {
                    required: true
                },
            },
            messages: {
                user_name: {
                    remote: "Username already exists."
                },
                email: {
                    remote: "This email is already taken."
                },
            },
            highlight: function (e) {
                $(e).closest(".form-group").addClass("has-error")
            },
            unhighlight: function (e) {
                $(e).closest(".form-group").removeClass("has-error")
            },
        });
    });
</script>
{% endblock %}
